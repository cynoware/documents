<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../sdk.css" />
<link rel="stylesheet" href="../styles/foundation.css" />
<script src="../highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<ul id='main'>
	<li><div class='title'>Introduction</div>
		We can use UART to drive ticket printer. After configure the baudrate of printer's UART,
		we can print the data by writing the printer's UART instruction.<br/>
		(The following is for demo only. Other printers may have different baudrate and intructions.)<br/>
		&nbsp;<br/>
	</li>
	<li><div class='title'>Example</div>
		<pre><code class='c'>#include "posmate.h"
#include "config.h"


void prtTest(Device *device, uint32_t uart) {
    static const char *str = "Hello, Printer!";
    uartFixedWrite(device, CONFIG_PRINTER_UART, str, strlen(str));
    uartFixedWrite(device, CONFIG_PRINTER_UART, "\r\n", 2);
}


int mainPrinter(int deviceMask, int argc, char **argv){
    Device *device = deviceNew();
    deviceDetect(device, deviceMask);

    if(deviceGetRawDevice(device) != NULL){
        //Set baudrate for YK printer
        uartSetConfig(device, CONFIG_PRINTER_UART, 9600, 8, UARTParity_None, UARTStopBits_1);

        //Test the printer by writing data to UART
        prtTest(device, CONFIG_PRINTER_UART);
    }
    deviceFree(device);
    return 0;
}</code></pre>
	</li>
</ul>
</body>
</html>
