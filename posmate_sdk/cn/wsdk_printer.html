<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../sdk.css" />
<link rel="stylesheet" href="../styles/foundation.css" />
<script src="../highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<ul id='main'>
	<li><div class='title'>简介</div>
		可以使用UART驱动小票打印机，通常只要先设定好UART输出波特率，
		然后按照小票打印机的指令文档，输出打印指令就可以了。<br/>
		（以下代码仅做示例，针对不同的打印机，波特率和指令系统可能不同。）<br/>
		&nbsp;<br/>
	</li>
	<li><div class='title'>示例代码</div>
		<pre><code class='c'>#include "posmate.h"
#include "config.h"


void prtTest(Device *device, uint32_t uart) {
    static const char *str = "Hello, Printer!";
    uartFixedWrite(device, CONFIG_PRINTER_UART, str, strlen(str));
    uartFixedWrite(device, CONFIG_PRINTER_UART, "\r\n", 2);
}


int mainPrinter(int deviceMask, int argc, char **argv){
    Device *device = deviceNew();
    deviceDetect(device, deviceMask);

    if(deviceGetRawDevice(device) != NULL){
        //Set baudrate for YK printer
        uartSetConfig(device, CONFIG_PRINTER_UART, 9600, 8, UARTParity_None, UARTStopBits_1);

        //Test the printer by writing data to UART
        prtTest(device, CONFIG_PRINTER_UART);
    }
    deviceFree(device);
    return 0;
}</code></pre>
	</li>
</ul>
</body>
</html>
